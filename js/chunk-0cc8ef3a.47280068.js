(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cc8ef3a"],{"159b":function(t,a,s){var e=s("da84"),c=s("fdbc"),i=s("17c2"),r=s("9112");for(var o in c){var n=e[o],l=n&&n.prototype;if(l&&l.forEach!==i)try{r(l,"forEach",i)}catch(u){l.forEach=i}}},"17c2":function(t,a,s){"use strict";var e=s("b727").forEach,c=s("a640"),i=s("ae40"),r=c("forEach"),o=i("forEach");t.exports=r&&o?[].forEach:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}},"21c0":function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"checkOrder"},[s("loading",{attrs:{loader:"dots",color:"#D1ACA6",active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),s("HeaderPic",[s("OrderProgress",{attrs:{currentStep:t.step}})],1),s("div",{staticClass:"container"},[s("div",{staticClass:"listContent"},[s("h3",[t._v("購買清單")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12",class:{"col-md-7":t.isConfirm}},[s("ul",{staticClass:"order"},[t._l(t.cart,(function(a){return s("li",{key:a.id,staticClass:"orderList"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-3 p-0",class:{"col-md-3":t.isConfirm,"col-md-2":!t.isConfirm}},[s("div",{staticClass:"productImg"},[s("img",{attrs:{src:a.imageUrl,alt:""}})])]),s("div",{staticClass:"col-md-7 p-0",class:{"col-7":t.isConfirm,"col-6":!t.isConfirm}},[s("div",{staticClass:"row m-0 w-100"},[s("div",{staticClass:"col-12 col-md-7 p-0"},[s("div",{staticClass:"productName",on:{click:function(s){return t.$router.push("/product_detail/"+a.id)}}},[t._v(t._s(a.title))])]),s("div",{staticClass:"col-12 col-md-5 p-0"},[t.isConfirm?s("div",{staticClass:"productQty"},[t._v("x "+t._s(a.qty))]):s("div",{staticClass:"productNum"},[s("div",{staticClass:"countNumber"},[s("button",{staticClass:"btn minus",on:{click:function(s){return t.changeQty(a,-1)}}},[s("i",{staticClass:"fas fa-minus"})]),s("input",{directives:[{name:"model",rawName:"v-model",value:a.qty,expression:"item.qty"}],staticClass:"productNumber",attrs:{type:"number",max:"10",min:"1"},domProps:{value:a.qty},on:{change:function(s){return t.changeNumber(a,a.qty)},input:function(s){s.target.composing||t.$set(a,"qty",s.target.value)}}}),s("button",{staticClass:"btn add",on:{click:function(s){return t.changeQty(a,1)}}},[s("i",{staticClass:"fas fa-plus"})])])])])])]),s("div",{staticClass:"col-2 p-0"},[s("div",{staticClass:"productTotal"},[t._v(t._s(t._f("currency")(a.price)))])]),t.isConfirm?t._e():s("div",{staticClass:"col-1 p-0"},[s("div",{staticClass:"productDel"},[s("span",{on:{click:function(s){return s.preventDefault(),t.removeCartItem(a.id)}}},[s("i",{staticClass:"fas fa-trash"})])])])])])})),s("li",{staticClass:"orderList productSummary"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6 summary"},[t._v("共 "+t._s(t.cartLength)+" 項")]),s("div",{staticClass:"col-3 summary"},[t._v("總計")]),s("div",{staticClass:"summary",class:{"col-3":t.isConfirm,"col-2":!t.isConfirm}},[t._v(t._s(t._f("currency")(t.total)))]),t.isConfirm?t._e():s("div",{staticClass:"col-1 p-0"})])])],2),t.isConfirm?t._e():s("div",{staticClass:"check"},[0===t.cartLength?s("button",{staticClass:"btn",on:{click:function(a){return a.preventDefault(),t.$router.push("/product_list")}}},[s("i",{staticClass:"fas fa-store-alt mr-1"}),t._v("回到商店")]):s("button",{staticClass:"btn",on:{click:function(a){return a.preventDefault(),t.confirmCart(a)}}},[s("i",{staticClass:"fas fa-clipboard-check mr-1"}),t._v("確認送出")])])]),t.isConfirm?s("div",{staticClass:"col-md-5"},[s("div",{staticClass:"infoArea d-flex justify-content-center align-items-center flex-column"},[s("div",{staticClass:"input-group couponInfo"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"優惠券代碼"},domProps:{value:t.coupon_code},on:{input:function(a){a.target.composing||(t.coupon_code=a.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("span",{staticClass:"input-group-text",on:{click:t.addCouponCode}},[t._v("確認")])])]),s("table",{staticClass:"table totalInfo"},[s("tbody",[s("tr",[s("td",[t._v("總計金額")]),s("td",{staticClass:"text-right"},[t._v("NT "+t._s(t._f("currency")(t.cartData.total)))])]),s("tr",[s("td",[t._v("優惠折抵")]),s("td",{staticClass:"text-right"},[t._v("- NT "+t._s(t._f("currency")(t.cartData.total-t.cartData.final_total)))])]),s("tr",[s("td",[t._v("應付金額")]),s("td",{staticClass:"text-right"},[t._v("NT "+t._s(t._f("currency")(t.cartData.final_total)))])])])]),s("div",{staticClass:"nextStep"},[s("button",{staticClass:"btn",on:{click:function(a){return a.preventDefault(),t.goNextPage(a)}}},[t._v("下一步"),s("i",{staticClass:"fas fa-angle-double-right ml-1"})])])])]):t._e()]),t._m(0)])]),t._m(1)],1)},c=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-12"},[s("div",{staticClass:"notice"},[s("div",{staticClass:"backText"},[t._v("NOTICE")]),s("h5",[s("i",{staticClass:"fas fa-exclamation-circle mr-3"}),t._v("注意事項")]),s("ul",[s("li",[t._v("請確認所填寫的資料是否正確，下單後未提供修改付款方式服務。")]),s("li",[t._v("因拍攝略有色差，圖片僅供參考，顏色請以實際收到商品為準。")]),s("li",[t._v("本店商品目前只供應台灣地區，只提供宅配到府。")]),s("li",[t._v("目前支援貨到付款、超商付款、ATM付款。")]),s("li",[t._v("本店商品為統一會於付款後7個工作日內出貨(不含假日)。")]),s("li",[t._v("辦理退換貨時，商品必須是全新狀態與完整包裝，退回之商品必須於7日鑑賞期內寄回。")])])])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"modal fade p-0",attrs:{id:"leaveModal",tabindex:"-1",role:"dialog","aria-hidden":"true","data-backdrop":"static"}},[s("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[s("div",{staticClass:"modal-content border-0"},[s("div",{staticClass:"modal-body"},[s("p",[t._v("尚未完成訂購流程，請確認是否離開此頁?")])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn cancel",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),s("button",{staticClass:"btn confirm",attrs:{type:"button","data-dismiss":"modal"}},[t._v("確定")])])])])])}],i=(s("99af"),s("4160"),s("a434"),s("159b"),s("1157")),r=s.n(i),o=s("ae61"),n=s("d10b"),l={name:"CheckOrder",components:{HeaderPic:o["a"],OrderProgress:n["a"]},data:function(){return{cart:{},cartLength:"",isLoading:!1,coupon_code:"",step:1,total:0,cartData:{total:0,final_total:0},isConfirm:!1,isNext:!1}},methods:{getCart:function(){var t=this;t.cart=JSON.parse(localStorage.getItem("cart"))||[],t.cartLength=this.cart.length,t.total=0,t.cart.forEach((function(a){t.total+=a.total})),0===t.cartLength&&(t.isNext=!0,t.$router.push("/product_list"))},removeCartItem:function(t){var a=this,s=-1;a.cart.length>0&&a.cart.forEach((function(a,e){a.id===t&&(s=e)})),a.cart.splice(s,1),localStorage.setItem("cart",JSON.stringify(a.cart)),a.$bus.$emit("cart:get"),a.$bus.$emit("message:push","商品已刪除","success"),a.getCart()},changeQty:function(t,a){var s=parseInt(t.qty+a,10);this.changeNumber(t,s)},changeNumber:function(t,a){var s=this,e=-1;s.cart.length>0&&s.cart.forEach((function(a,s){a.id===t.id&&(e=s)})),s.cart[e].qty=a>=10?10:a<=1?1:a;var c=parseInt(s.cart[e].price*s.cart[e].qty,10);s.cart[e].total=c,localStorage.setItem("cart",JSON.stringify(s.cart)),s.$bus.$emit("cart:get"),s.getCart()},confirmCart:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("ownspace","/cart");t.isLoading=!0,t.cart=JSON.parse(localStorage.getItem("cart"))||[],t.cart.forEach((function(s){var e={product_id:s.id,qty:s.qty};t.$http.post(a,{data:e}).then((function(a){a.data.success?t.getCartData():t.$bus.$emit("message:push",a.data.message,"danger"),t.isLoading=!1}))}))},getCartData:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("ownspace","/cart");t.$http.get(a).then((function(a){a.data.success?(t.cartData=a.data.data,t.cartData.carts.length>0?t.isConfirm=!0:t.isConfirm=!1):t.$bus.$emit("message:push",a.data.message,"danger")}))},addCouponCode:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("ownspace","/coupon"),s={code:t.coupon_code};t.isLoading=!0,t.$http.post(a,{data:s}).then((function(a){t.getCartData(),t.isLoading=!1,a.data.success?t.$bus.$emit("message:push",a.data.message,"success"):t.$bus.$emit("message:push",a.data.message,"danger")}))},cancelCart:function(){var t=this;t.isConfirm&&t.cartData.carts.forEach((function(a){var s="".concat("https://vue-course-api.hexschool.io","/api/").concat("ownspace","/cart/").concat(a.id);t.$http.delete(s).then((function(a){a.data.success||t.$bus.$emit("message:push",a.data.message,"danger")}))}))},goNextPage:function(){this.isNext=!0,this.$router.push("/buyer_info")}},created:function(){var t=this;t.getCart(),t.getCartData(),t.$bus.$on("checkCart:get",(function(){return t.getCart()}))},beforeRouteLeave:function(t,a,s){var e=this;e.isNext?s():(r()("#leaveModal").modal("show"),r()(".confirm").on("click",(function(){e.cancelCart(),s()})),r()(".cancel").on("click",(function(){s(!1)})))}},u=l,d=s("2877"),f=Object(d["a"])(u,e,c,!1,null,null,null);a["default"]=f.exports},4160:function(t,a,s){"use strict";var e=s("23e7"),c=s("17c2");e({target:"Array",proto:!0,forced:[].forEach!=c},{forEach:c})},8418:function(t,a,s){"use strict";var e=s("c04e"),c=s("9bf2"),i=s("5c6c");t.exports=function(t,a,s){var r=e(a);r in t?c.f(t,r,i(0,s)):t[r]=s}},"99af":function(t,a,s){"use strict";var e=s("23e7"),c=s("d039"),i=s("e8b5"),r=s("861d"),o=s("7b0b"),n=s("50c4"),l=s("8418"),u=s("65f0"),d=s("1dde"),f=s("b622"),p=s("2d00"),v=f("isConcatSpreadable"),m=9007199254740991,C="Maximum allowed index exceeded",h=p>=51||!c((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),g=d("concat"),_=function(t){if(!r(t))return!1;var a=t[v];return void 0!==a?!!a:i(t)},b=!h||!g;e({target:"Array",proto:!0,forced:b},{concat:function(t){var a,s,e,c,i,r=o(this),d=u(r,0),f=0;for(a=-1,e=arguments.length;a<e;a++)if(i=-1===a?r:arguments[a],_(i)){if(c=n(i.length),f+c>m)throw TypeError(C);for(s=0;s<c;s++,f++)s in i&&l(d,f,i[s])}else{if(f>=m)throw TypeError(C);l(d,f++,i)}return d.length=f,d}})},a434:function(t,a,s){"use strict";var e=s("23e7"),c=s("23cb"),i=s("a691"),r=s("50c4"),o=s("7b0b"),n=s("65f0"),l=s("8418"),u=s("1dde"),d=s("ae40"),f=u("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,m=Math.min,C=9007199254740991,h="Maximum allowed length exceeded";e({target:"Array",proto:!0,forced:!f||!p},{splice:function(t,a){var s,e,u,d,f,p,g=o(this),_=r(g.length),b=c(t,_),y=arguments.length;if(0===y?s=e=0:1===y?(s=0,e=_-b):(s=y-2,e=m(v(i(a),0),_-b)),_+s-e>C)throw TypeError(h);for(u=n(g,e),d=0;d<e;d++)f=b+d,f in g&&l(u,d,g[f]);if(u.length=e,s<e){for(d=b;d<_-e;d++)f=d+e,p=d+s,f in g?g[p]=g[f]:delete g[p];for(d=_;d>_-e+s;d--)delete g[d-1]}else if(s>e)for(d=_-e;d>b;d--)f=d+e-1,p=d+s-1,f in g?g[p]=g[f]:delete g[p];for(d=0;d<s;d++)g[d+b]=arguments[d+2];return g.length=_-e+s,u}})},a640:function(t,a,s){"use strict";var e=s("d039");t.exports=function(t,a){var s=[][t];return!!s&&e((function(){s.call(null,a||function(){throw 1},1)}))}},ae61:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container-fluid headerPic"},[t._t("default")],2)},c=[],i={name:"HeaderPic"},r=i,o=s("2877"),n=Object(o["a"])(r,e,c,!1,null,null,null);a["a"]=n.exports},d10b:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"orderProgress"},[s("div",{staticClass:"row m-0"},[s("div",{staticClass:"col-sm-4"},[s("div",{staticClass:"step",class:{current:1===t.currentStep}},[t._v("Step1"),s("p",[t._v("確認購買")])])]),s("div",{staticClass:"col-sm-4"},[s("div",{staticClass:"step",class:{current:2===t.currentStep}},[t._v("Step2"),s("p",[t._v("填寫資料")])])]),s("div",{staticClass:"col-sm-4"},[s("div",{staticClass:"step",class:{current:3===t.currentStep}},[t._v("Step3"),s("p",[t._v("完成訂單")])])])])])},c=[],i={name:"OrderProgress",props:["currentStep"]},r=i,o=s("2877"),n=Object(o["a"])(r,e,c,!1,null,null,null);a["a"]=n.exports},fdbc:function(t,a){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-0cc8ef3a.47280068.js.map