(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a42bc02e"],{1588:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"products"},[a("loading",{attrs:{loader:"dots",color:"#D1ACA6",active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("HeaderPic",[a("Category",{attrs:{category:t.category,currentOption:t.isCurrent},on:{"get-category":t.changeCategory}})],1),a("div",{staticClass:"container-fluid productsContent"},[a("div",{staticClass:"row"},t._l(t.filterProducts,(function(e){return a("div",{key:e.id,staticClass:"col-xl-3 col-lg-4 col-sm-6 px-xl-3 px-3"},[a("div",{staticClass:"productBox",class:{mask:!e.is_enabled},on:{click:function(a){return t.$router.push("/product_detail/"+e.id)}}},[e.is_enabled?t._e():a("div",{staticClass:"soldOut"},[a("h6",[t._v("已售完")])]),a("div",{staticClass:"top"},[a("img",{attrs:{src:e.imageUrl,alt:""}}),e.price!==e.origin_price?a("div",{staticClass:"tag"},[t._v("特價中")]):t._e()]),a("div",{staticClass:"bottom"},[a("h3",[t._v(t._s(e.title))]),a("div",{staticClass:"text d-flex justify-content-start align-items-center"},[a("div",{staticClass:"price"},[t._v("NT "+t._s(t._f("currency")(e.price)))]),t.setliked(e)?a("i",{staticClass:"fas fa-thumbs-up like liked",on:{click:function(a){return a.stopPropagation(),t.changeFavorite(e)}}}):a("i",{staticClass:"fas fa-thumbs-up like",on:{click:function(a){return a.stopPropagation(),t.changeFavorite(e)}}}),e.id!==t.status.loadingItem?a("i",{staticClass:"fas fa-cart-plus cart",on:{click:function(a){return a.stopPropagation(),t.addtoCart(e)}}}):a("i",{staticClass:"fas fa-spinner fa-spin disabled",on:{click:function(t){t.stopPropagation()}}})])])])])})),0)]),t.pagination.total_pages>1?a("pagination",{attrs:{pagination:t.pagination},on:{"get-pagination":t.setPagination}}):t._e(),a("ToTop")],1)},r=[],n=(a("99af"),a("4de4"),a("4160"),a("c975"),a("fb6a"),a("a434"),a("159b"),a("ae61")),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidebar"},[a("ul",t._l(t.category,(function(e){return a("li",{key:e.id,class:{active:e===t.currentOption},attrs:{value:e},on:{click:function(a){return a.preventDefault(),t.getCategory(e)}}},[t._v(t._s(e))])})),0)])},o=[],c={name:"Category",props:["category","currentOption"],methods:{getCategory:function(t){this.$emit("get-category",t)}}},l=c,u=a("2877"),f=Object(u["a"])(l,s,o,!1,null,null,null),g=f.exports,d=a("1799"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"toTop",on:{click:t.scrollToTop}},[a("i",{staticClass:"fas fa-angle-double-up"})])},h=[],v=a("1157"),m=a.n(v),C={name:"ToTop",methods:{scrollToTop:function(){m()("body,html").animate({scrollTop:0},"slow")},handleScroll:function(){m()(window).scrollTop()>500?m()(".toTop").addClass("show"):m()(".toTop").removeClass("show")}},mounted:function(){window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)}},y=C,_=Object(u["a"])(y,p,h,!1,null,null,null),b=_.exports,S={name:"ProductList",components:{HeaderPic:n["a"],Category:g,Pagination:d["a"],ToTop:b},data:function(){return{products:[],category:[],isCurrent:"全部商品",currentPageNum:1,showPages:"",pagination:{total_pages:"",current_page:"",has_pre:!1,has_next:!0},status:{loadingItem:""},isLoading:!1,favorites:[],cart:[]}},methods:{getProducts:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("ownspace","/products/all");t.isLoading=!0,t.$http.get(e).then((function(e){t.isLoading=!1,e.data.success?(t.products=e.data.products,t.getCategory(),t.showPages=Math.ceil(t.products.length/8)):(t.$bus.$emit("message:push",e.data.message,"danger"),t.$router.push("/product_list"))}))},getCategory:function(){var t=this,e=[];t.products.forEach((function(t){return e.push(t.category)})),t.category=e.filter((function(t,e,a){return a.indexOf(t)===e})),t.category.unshift("全部商品")},setPagination:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.currentPageNum=t,this.pagination.total_pages=this.showPages,this.pagination.current_page=this.currentPageNum,this.currentPageNum<=1?this.pagination.has_pre=!1:this.pagination.has_pre=!0,this.currentPageNum>=this.pagination.total_pages?this.pagination.has_next=!1:this.pagination.has_next=!0},setShowData:function(t){var e=Math.ceil(t.length/8);this.showPages=e,this.setPagination(this.currentPageNum);var a=8*(parseInt(this.currentPageNum,10)-1),i=8*(parseInt(this.currentPageNum,10)-1)+8;return t.slice(a,i)},changeCategory:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"全部商品";this.isCurrent=t,this.currentPageNum=1},addtoCart:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this,i=-1;if(a.status.loadingItem=t.id,a.getCart(),a.cart.length>0&&a.cart.forEach((function(e,a){e.id===t.id&&(i=a)})),-1===i){var r=parseInt(t.price*e,10);a.$set(t,"qty",e),a.$set(t,"total",r),a.cart.push(t)}else{var n=Object.assign({},a.cart[i]);n.qty+=e;var s=parseInt(t.price*n.qty,10);n.total=s,a.cart.splice(i,1),a.cart.push(n)}localStorage.setItem("cart",JSON.stringify(a.cart)),a.getCart(),a.$bus.$emit("cart:get"),a.$bus.$emit("message:push","商品已加入購物車","success"),a.status.loadingItem=""},getCart:function(){this.cart=JSON.parse(localStorage.getItem("cart"))||[]},getFavorites:function(){this.favorites=JSON.parse(localStorage.getItem("favorites"))||[]},changeFavorite:function(t){var e=this,a=-1;e.favorites.length>0&&e.favorites.forEach((function(e,i){e.id===t.id&&(a=i)})),-1===a?e.favorites.push(t):e.favorites.splice(a,1),localStorage.setItem("favorites",JSON.stringify(e.favorites)),e.getFavorites(),e.$bus.$emit("favor:get")},setliked:function(t){var e=this.favorites.filter((function(e){return e.id===t.id}));return e.length>0}},computed:{filterProducts:function(){var t=this,e=this.products;return this.isCurrent&&"全部商品"!==this.isCurrent&&(e=this.products.filter((function(e){return e.category===t.isCurrent}))),this.setShowData(e)}},created:function(){var t=this;t.$route.params.category&&(t.isCurrent=t.$route.params.category),t.getProducts(),t.getCart(),t.getFavorites(),t.$bus.$on("productFavor:get",(function(){return t.getFavorites()}))}},P=S,x=Object(u["a"])(P,i,r,!1,null,null,null);e["default"]=x.exports},"159b":function(t,e,a){var i=a("da84"),r=a("fdbc"),n=a("17c2"),s=a("9112");for(var o in r){var c=i[o],l=c&&c.prototype;if(l&&l.forEach!==n)try{s(l,"forEach",n)}catch(u){l.forEach=n}}},1799:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-center align-items-center pb-5"},[a("ul",{staticClass:"pages"},[a("li",{staticClass:"page previus",class:{disabled:!t.pagination.has_pre}},[a("a",{staticClass:"pageNumber",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.getPages(t.pagination.current_page-1)}}},[a("i",{staticClass:"fas fa-angle-left"})])]),t._l(t.pagination.total_pages,(function(e){return a("li",{key:e,staticClass:"page",class:{active:t.pagination.current_page===e}},[a("a",{staticClass:"pageNumber",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.getPages(e)}}},[t._v(t._s(e))])])})),a("li",{staticClass:"page next",class:{disabled:!t.pagination.has_next}},[a("a",{staticClass:"pageNumber",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.getPages(t.pagination.current_page+1)}}},[a("i",{staticClass:"fas fa-angle-right"})])])],2)])},r=[],n={name:"Pagination",props:["pagination"],methods:{getPages:function(t){this.$emit("get-pagination",t)}}},s=n,o=a("2877"),c=Object(o["a"])(s,i,r,!1,null,null,null);e["a"]=c.exports},"17c2":function(t,e,a){"use strict";var i=a("b727").forEach,r=a("a640"),n=a("ae40"),s=r("forEach"),o=n("forEach");t.exports=s&&o?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,a){"use strict";var i=a("23e7"),r=a("17c2");i({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},8418:function(t,e,a){"use strict";var i=a("c04e"),r=a("9bf2"),n=a("5c6c");t.exports=function(t,e,a){var s=i(e);s in t?r.f(t,s,n(0,a)):t[s]=a}},"99af":function(t,e,a){"use strict";var i=a("23e7"),r=a("d039"),n=a("e8b5"),s=a("861d"),o=a("7b0b"),c=a("50c4"),l=a("8418"),u=a("65f0"),f=a("1dde"),g=a("b622"),d=a("2d00"),p=g("isConcatSpreadable"),h=9007199254740991,v="Maximum allowed index exceeded",m=d>=51||!r((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),C=f("concat"),y=function(t){if(!s(t))return!1;var e=t[p];return void 0!==e?!!e:n(t)},_=!m||!C;i({target:"Array",proto:!0,forced:_},{concat:function(t){var e,a,i,r,n,s=o(this),f=u(s,0),g=0;for(e=-1,i=arguments.length;e<i;e++)if(n=-1===e?s:arguments[e],y(n)){if(r=c(n.length),g+r>h)throw TypeError(v);for(a=0;a<r;a++,g++)a in n&&l(f,g,n[a])}else{if(g>=h)throw TypeError(v);l(f,g++,n)}return f.length=g,f}})},a434:function(t,e,a){"use strict";var i=a("23e7"),r=a("23cb"),n=a("a691"),s=a("50c4"),o=a("7b0b"),c=a("65f0"),l=a("8418"),u=a("1dde"),f=a("ae40"),g=u("splice"),d=f("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min,v=9007199254740991,m="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!g||!d},{splice:function(t,e){var a,i,u,f,g,d,C=o(this),y=s(C.length),_=r(t,y),b=arguments.length;if(0===b?a=i=0:1===b?(a=0,i=y-_):(a=b-2,i=h(p(n(e),0),y-_)),y+a-i>v)throw TypeError(m);for(u=c(C,i),f=0;f<i;f++)g=_+f,g in C&&l(u,f,C[g]);if(u.length=i,a<i){for(f=_;f<y-i;f++)g=f+i,d=f+a,g in C?C[d]=C[g]:delete C[d];for(f=y;f>y-i+a;f--)delete C[f-1]}else if(a>i)for(f=y-i;f>_;f--)g=f+i-1,d=f+a-1,g in C?C[d]=C[g]:delete C[d];for(f=0;f<a;f++)C[f+_]=arguments[f+2];return C.length=y-i+a,u}})},a640:function(t,e,a){"use strict";var i=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&i((function(){a.call(null,e||function(){throw 1},1)}))}},ae61:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid headerPic"},[t._t("default")],2)},r=[],n={name:"HeaderPic"},s=n,o=a("2877"),c=Object(o["a"])(s,i,r,!1,null,null,null);e["a"]=c.exports},c975:function(t,e,a){"use strict";var i=a("23e7"),r=a("4d64").indexOf,n=a("a640"),s=a("ae40"),o=[].indexOf,c=!!o&&1/[1].indexOf(1,-0)<0,l=n("indexOf"),u=s("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:c||!l||!u},{indexOf:function(t){return c?o.apply(this,arguments)||0:r(this,t,arguments.length>1?arguments[1]:void 0)}})},fb6a:function(t,e,a){"use strict";var i=a("23e7"),r=a("861d"),n=a("e8b5"),s=a("23cb"),o=a("50c4"),c=a("fc6a"),l=a("8418"),u=a("b622"),f=a("1dde"),g=a("ae40"),d=f("slice"),p=g("slice",{ACCESSORS:!0,0:0,1:2}),h=u("species"),v=[].slice,m=Math.max;i({target:"Array",proto:!0,forced:!d||!p},{slice:function(t,e){var a,i,u,f=c(this),g=o(f.length),d=s(t,g),p=s(void 0===e?g:e,g);if(n(f)&&(a=f.constructor,"function"!=typeof a||a!==Array&&!n(a.prototype)?r(a)&&(a=a[h],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return v.call(f,d,p);for(i=new(void 0===a?Array:a)(m(p-d,0)),u=0;d<p;d++,u++)d in f&&l(i,u,f[d]);return i.length=u,i}})},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-a42bc02e.7b2a7a9b.js.map